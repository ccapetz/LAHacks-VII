<!DOCTYPE html>
<html>
  <head>
    <title>Building Damage Detection</title>
  </head>
  <body>
    <h1>Building Damage Detection</h1>
    <form id="myForm" enctype="multipart/form-data">
      <input type="file" id="input">
      <button type="button" onclick="uploadFile()">Upload</button>
    </form>

    <h2>Output Image:</h2>
    <img src="your_output_image_path.jpg" />

    <script>
      function uploadFile() {
        var fileInput = document.getElementById("input");
        var file = fileInput.files[0];
        var formData = new FormData();
        formData.append("file", file);
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/upload", true);
        xhr.onreadystatechange = function() {
          if (xhr.readyState === 4 && xhr.status === 200) {
            document.getElementById("output-img").src = "/static/out.png";
            document.getElementById("output-img").style.display = "block";
          }
        };
        xhr.send(formData);
      }
    </script>
  </body>
</html>


        <!-- <script>
            var fileInput = document.getElementByID("input")
            var file = fileInput.files[0];
            var formData = new FormData();
            formData.append("file", file);
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/74.207.251.96:5002", true);
            xhr.onload = function () {
                if (xhr.status === 201) {
                    console.log(xhr.responseText);
                    let getRequest = XMLHttpRequest();
                    getRequest.open("GET", "/74.207.251.96:5002", true);
                    getRequest.responseType = "blob";
                    getRequest.onload = function () {
                        if (getRequest.status() == 200) {
                            var b = new Blob([getRequest.response], { type: 'image/png' });
                            downloadBlob(b, "image.png");
                        }
                    }
                } else {
                    console.log("Error:", xhr.statusText);
                }
            };
            xhr.send(formData);
            //POST done

            function downloadBlob(blob, name = 'file.txt') {
                // Convert your blob into a Blob URL (a special url that points to an object in the browser's memory)
                const blobUrl = URL.createObjectURL(blob);

                // Create a link element
                const link = document.createElement("a");

                // Set link's href to point to the Blob URL
                link.href = blobUrl;
                link.download = name;

                // Append link to the body
                document.body.appendChild(link);

                // Dispatch click event on the link
                // This is necessary as link.click() does not work on the latest firefox
                link.dispatchEvent(
                    new MouseEvent('click', {
                        bubbles: true,
                        cancelable: true,
                        view: window
                    })
                );

                // Remove link from body
                document.body.removeChild(link);
            }


        </script> -->
 